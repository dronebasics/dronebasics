<!DOCTYPE html>
<html>
	<head>
		<title>Drones: Technology</title>
		
		<script src="http://cleantech4us.github.io/JSDep/skrollr.min.js"></script>
		
		<link rel="stylesheet" href="/uni.css" />
		<link rel="stylesheet" href="tech.css" />
		
		<!--<script type="text/javascript" src="http://code.jquery.com/jquery-2.2.0.min.js"></script>
		
		<!-- Preloader ->
		<script type="text/javascript">
		    //<![CDATA[
		        $(window).load(function() { // makes sure the whole site is loaded
		            $('#status').fadeOut(); // will first fade out the loading animation
		            $('#preloader').delay(350).fadeOut('slow'); // will fade out the white DIV that covers the website.
		            $('body').delay(350).css({'overflow':'visible'});
		        })
		    //]]>
		</script>-->
	</head>
	<body>
		<!-- Preloader -->
		<div id="preloader">
		    <div id="status">
				<p>Patience, please<br />This one's big</p>
				<p>It'll be worth it. We promise.</p>
				<p><progress id="status2" max="540" value="0"></progress></p>
				
				<p id="slowConnect" style="display:none;">Slow connection? Try the compressed version <a href="orig.html">here</a>. Warning: may be werid and buggy.</p>
			</div>
			
		</div>
		
		
		
		<nav>
			<ul>
				<li><a href="/">Home</a></li>
				<li><a href="/Use">Uses</a></li>
				<li class="CurrPage"><a>Technology</a></li>
				<li><a href="/Prob">Concerns</a></li>
			</ul>
		</nav>
		
		<div id="Card1" class="Card" data-0="opacity:1;" data-500="opacity:0;">
			<h1>Drone Technology</h1>
		</div>
		<div id="Card2" class="Card" data-1000="opacity:0;" data-1300="opacity:1;" data-2300="opacity:1;" data-2600="opacity:0;">
			<h2>Blades</h2>
		</div>
		<div id="Card3" class="Card" data-3300="opacity:0;" data-3600="opacity:1;" data-4000="opacity:1;" data-4300="opacity:0;">
			<h2>Power</h2>
		</div>
		<div id="Card4" class="Card" data-4300="opacity:0;" data-4600="opacity:1;" data-5200="opacity:1;" data-5500="opacity:0;">
			<h2>Communications</h2>
		</div>
		<div id="Card5" class="Card" data-6100="opacity:0;" data-6400="opacity:1;" data-7400="opacity:1;" data-7700="opacity:0;">
			<h2>Landing Mechanism</h2>
		</div>
		<div id="Card6" class="Card" data-8100="opacity:0;" data-8400="opacity:1;">
			<h2>Onboard Computer</h2>
		</div>
		
		<div id="set-height"></div>
		<p id="time"></p>
		<!--<video id="v0" tabindex="0" autobuffer="autobuffer" preload="preload">
			<source type="video/mp4" src="/img/test.mp4">
			</source>
			<p>Sorry, your browser does not support the &lt;video&gt; element.</p>
		</video>-->
		<img src="/img/dronevideopics/test000.png" id="v1" alt="A video of a drone" />
		
		<script>
			// select video element
			var vid = document.getElementById('v1');
			//var vid = $('#v0')[0]; // jquery option
			
			// pause video on load
			/*vid.pause();
			
			// pause video on document scroll (stops autoplay once scroll started)
			window.onscroll = function(){
				vid.pause();
			};*/
			
			// refresh video frames on interval for smoother playback
			setInterval(function(){
				//vid.currentTime = window.pageYOffset/400;
				vid.src = "/img/dronevideopics/test" + pad(Math.round(window.pageYOffset / 16), 3) + ".png";
			}, 100);
			
			
			//
			//	SKROLLR
			//
			var s = skrollr.init();
			
			
			
			
			function pad(num, size) {
				if(num > 540){return 540;} // Quick Hack - CHANGE TO REFLECT NUM OF FRAMES
				
				var s = num+"";
				while (s.length < size) s = "0" + s;
				return s;
			}
			
			
			
			
			
			
			
			//
			//IMAGE PRELOADING CRAP
			//
			var images = new Array()
			console.log("WARNING About to dump massive stuff to console");

			for(i = 0; i <= 540; i++) {
				images[i] = new Image()
				images[i].src = "/img/dronevideopics/test" + pad(i, 3) + ".png";
				console.log("Loaded " + i + " of 540 images");
			}
			
			var loadBar = document.getElementById("status2");
			images[1].onload   = function(){loadBar.value = 1;};
			images[50].onload  = function(){loadBar.value = 50;};
			images[100].onload = function(){loadBar.value = 100;};
			images[150].onload = function(){loadBar.value = 150;};
			images[200].onload = function(){loadBar.value = 200;};
			images[250].onload = function(){loadBar.value = 250;};
			images[300].onload = function(){loadBar.value = 300;};
			images[350].onload = function(){loadBar.value = 350;};
			images[400].onload = function(){loadBar.value = 400;};
			images[450].onload = function(){loadBar.value = 450;};
			images[500].onload = function(){loadBar.value = 500;};
			images[540].onload = function(){
				loadBar.value = 540;
				document.getElementById("preloader").style.display = "none";
				document.getElementsByTagName("BODY")[0].style.overflow = "visible";
			};
			
			
			
			
			
			setTimeout(slowLoad, 30000);
			function slowLoad(){
				document.getElementById("slowConnect").style.display = "block";
			}
			</script>
	
	</body>
</html>